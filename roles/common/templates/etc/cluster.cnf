# MHA cluster configuration
# generated by Ansible, do not modify by hand.
#
# config for cluster: {{cluster_id}}

[server default]

user={{my_mha_user}}
password={{my_mha_pass}}

repl_user={{my_repl_user}}
repl_password={{my_repl_pass}}

ssh_user=root

manager_workdir=/var/log/masterha/{{cluster_id}}
remote_workdir=/var/log/masterha/{{cluster_id}}
master_ip_online_change_script=/usr/local/sbin/master_ip_online_change.sh
  
master_binlog_dir=/db/log

{% for host in groups['databases'] %}
[server_{{ hostvars[host]['nickname'] }}]
hostname={{ hostvars[host]['inventory_hostname'] }}
{% if hostvars[host]['readwrite_slave']  == 'true'  %}
no_master=1
{% endif -%}

{% endfor %}
